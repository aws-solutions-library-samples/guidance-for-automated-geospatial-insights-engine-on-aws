# UI Module

## Overview

The `UI` module is responsible for providing a user interface, managing authentication and authorization, querying the STAC Server for analysis results, converting the results into renderable assets, utilizing the Amazon Location Service for basemap data, and rendering interactive maps on the front-end using a map rendering library like MapLibre GL JS.

## Architecture

### AGIE Conceptual Architecture

![conceptual](docs/images/AGIE%20HLA-ui-conceptual.png)

The `UI` module contains the demo UI and supporting infrastructure to allow analysis result generated by AGIE to be rendered by front end map rendering library.

### UI Logical Architecture

![logical](docs/images/AGIE%20HLA-ui.png)

The`UI` module provides a REST API (see [swagger](./docs/swagger.json)) that queries `STAC Server` and convert the returned features into an assets can be rendered by the front end map rendering library. The REST API is implemented as a fat lambda that is proxied via API Gateway.

API Gateway utilizes Cognito for authentication, and Verified Permissions for authorization. Currently, authorization is performed at the REST API endpoint level (e.g. only `admin`'s allowed to `POST`), but the use of Verified Permissions allows this to be extended to FGAC (fine-grained access control) if needed in the future.

The Amazon Location Service Map resource gives you access to the underlying basemap data for a map. You use the Map resource with a map rendering library to add an interactive map to your application.

Amazon Cognito identity pools provide temporary AWS credentials for authenticated user that used to query Amazon Location Service resources.

Amazon S3 hosts the web UI resources and Amazon CloudFront securely deliver the content with low latency and high transfer speeds.

The demo UI uses [MapLibre GL JS](https://maplibre.org/maplibre-gl-js/docs/) to render interactive maps from vector tiles in the browser.
